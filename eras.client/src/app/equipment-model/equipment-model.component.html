<div class="container">
  <div class="equipment-management mt-2">
    <h1 mat-dialog-title>Manage Equipment Models</h1>

    <div class="loading-overlay" *ngIf="isLoading">
      <mat-spinner> </mat-spinner>
    </div>

    <mat-form-field class="filter">
      <mat-label>Filter</mat-label>
      <input matInput (keyup)="applyFilter($event)" placeholder="Ex. ERB-20" #input>
    </mat-form-field>

    <!--Equipment Table-->
    <mat-table [dataSource]="dataSource" class="mat-elevation-z8" *ngIf="!isLoading">
      <!--Id Column-->
      <ng-container matColumnDef="id" class="mat-column-id">
        <mat-header-cell *matHeaderCellDef> ID </mat-header-cell>
        <mat-cell *matCellDef="let equipment"> {{equipment.id}} </mat-cell>
      </ng-container>

      <!--Name Column-->
      <ng-container matColumnDef="name">
        <mat-header-cell *matHeaderCellDef> Name </mat-header-cell>
        <mat-cell *matCellDef="let equipment"> {{equipment.name}} </mat-cell>
      </ng-container>

      <!--Alias Column-->
      <ng-container matColumnDef="alias">
        <mat-header-cell *matHeaderCellDef> Alias </mat-header-cell>
        <mat-cell *matCellDef="let equipment"> {{equipment.alias}} </mat-cell>
      </ng-container>

      <!--User Created Column-->
      <ng-container matColumnDef="userCreated">
        <mat-header-cell *matHeaderCellDef> Created By </mat-header-cell>
        <mat-cell *matCellDef="let equipment"> {{equipment.userCreated}} </mat-cell>
      </ng-container>

      <!--Date Created Column-->
      <ng-container matColumnDef="dateCreated">
        <mat-header-cell *matHeaderCellDef> Created On </mat-header-cell>
        <mat-cell *matCellDef="let equipment"> {{equipment.dateCreated | date:'MMM d, YYYY'}} </mat-cell>
      </ng-container>

      <!--User Modified Column-->
      <ng-container matColumnDef="userModified">
        <mat-header-cell *matHeaderCellDef> Modified By </mat-header-cell>
        <mat-cell *matCellDef="let equipment"> {{equipment.userModified ? (equipment.userModified) : 'NA'}} </mat-cell>
      </ng-container>

      <!--Date Modified Column-->
      <ng-container matColumnDef="lastModified">
        <mat-header-cell *matHeaderCellDef> Last Modified </mat-header-cell>
        <mat-cell *matCellDef="let equipment"> {{equipment.dateModified ? (equipment.dateModified | date:'MMM d, YYYY') : 'NA'}} </mat-cell>
      </ng-container>

      <!--Actions Column-->
      <ng-container matColumnDef="actions" class="mat-column-action">
        <mat-header-cell *matHeaderCellDef> Actions </mat-header-cell>
        <mat-cell *matCellDef="let equipment">
          <button mat-icon-button (click)="editEquipment(equipment)" class="mat-action-button">
            <mat-icon class="mat-button-icon">edit</mat-icon>
          </button>
          <button mat-icon-button color="warn" (click)="deleteEquipment(equipment.id)" class="mat-action-button">
            <mat-icon class="mat-button-icon">delete</mat-icon>
          </button>
        </mat-cell>
      </ng-container>

      <!--Header and Row Definitions-->
      <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
      <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>

      <mat-row *matNoDataRow>
        <mat-cell colspan="4">No data matching the filter "{{input.value}}"</mat-cell>
      </mat-row>

    </mat-table>

    <!--Add New Equipment Button-->
    <button mat-icon-button class="add-button" (click)="openAddEquipmentDialog()">
      <mat-icon class="mat-add-button-icon">add</mat-icon>
    </button>
  </div>
</div>
